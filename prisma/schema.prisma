generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model UseCase {
  id                       String     @id @default(uuid())
  title                    String
  problemStatement         String
  proposedAISolution       String
  currentState             String
  desiredState             String
  primaryStakeholders      String[]
  secondaryStakeholders    String[]
  successCriteria          String[]
  problemValidation        String
  solutionHypothesis       String
  keyAssumptions           String[]
  initialROI               String
  confidenceLevel          Int
  operationalImpactScore   Int
  productivityImpactScore  Int
  revenueImpactScore       Int
  implementationComplexity Int
  estimatedTimeline        String
  requiredResources        String
  createdAt                DateTime   @default(now())
  updatedAt                DateTime   @updatedAt
  priority                 String?
  stage                    String?
  businessFunction         String
  finopsData               FinOps[]
  assessData               Assess[]
  Approval                 Approval[]
}

model FinOps {
  useCaseId       String  @id
  ROI             Float
  netValue        Float
  apiCostBase     Float
  cumOpCost       Float
  cumValue        Float
  devCostBase     Float
  infraCostBase   Float
  opCostBase      Float
  totalInvestment Float
  valueBase       Float
  valueGrowthRate Float
  useCase         UseCase @relation(fields: [useCaseId], references: [id])
}

model Assess {
  useCaseId String   @id
  createdAt DateTime @default(now())
  stepsData Json
  updatedAt DateTime
  UseCase   UseCase  @relation(fields: [useCaseId], references: [id])
}

model Approval {
  id                 String   @id @default(uuid())
  useCaseId          String   @unique // Foreign key to UseCase
  governanceName     String?
  governanceStatus   String?
  governanceComment  String?
  riskName           String?
  riskStatus         String?
  riskComment        String?
  legalName          String?
  legalStatus        String?
  legalComment       String?
  businessFunction   String?
  businessName       String?
  businessStatus     String?
  businessComment    String?
  finalQualification String?
  updatedAt          DateTime @updatedAt
  createdAt          DateTime @default(now())
  useCase            UseCase  @relation(fields: [useCaseId], references: [id])
}
